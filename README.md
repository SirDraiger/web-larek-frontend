# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Базовый код
### Класс api
Базовый класс для работы с API, реализует методы работы с ним. На основе данного класса реализуется класс - WebLarekAPI. <br>
Содержит следующии методы:
* get - отправляет get запрос
* post - отправляет post запрос

### Класс Model<T>
Абстрактный базовый класс. На основе данного класса реализуются классы модели - AppState, CardItem. <br>
Содержит следующие методы:
* emitChanges - сообщает всем, что модель изменилась

### Класс EventEmitter
Реализует паттерн «Наблюдатель» и позволяет подписываться на события и уведомлять подписчиков
о наступлении события. <br>
Содержит следующии методы:
* on - устанавливает обработчик на событие
* off - снимает обработчик с события
* emit - инициирует событие с данными
* onAll - устанавливает обработчик на все события
* offAll - снимает обработчик со всех событий
* trigger - устанавливает триггер, генерирующий событие при вызове

### Класс Component<T>
Базовый класс, на основании которого реализуются классы слоя View. Данный класс реализует методы для взаимодействия с DOM. <br>
Содержит следующие методы:
* toggleClass - переключает класс элемента
* setText - устанавливает текстовое содержание
* setDisabled - меняет статус блокировки элемента
* setHidden - скрывает элемент 
* setVisible - показывает элемент
* setImage - устанавливает изображение с альтернативным текстом
* render- возвращает корневой DOM-элемент

## Компоненты модели данных
### Класс AppState
Основной класс в котором хранятся данные приложения, а так же методы для работы с ними. Насладуется от базового класса Model. <br>
Содержит следующие свойства:
```
catalog: IProduct[]; // хранит данные о товарах
basket: IProduct[] = []; // хранит список товаров в корзине
order: IOrder = { // хранит данные о заказе
  payment: 'online', // тип оплаты заказа
	email: '', // адрес почты покупателя
	phone: '', // телефон покупателя
	address: '', // адрес покупателя
	total: 0, // сумма заказа
	items: [], // содержимое заказа
	};

	formErrors: IFormErrors = {}; // хранение ошибок валидации
```
Содержит следующие методы:
* setCatalog() - создаёт массив карточек товаров (экземпляры класса CardItem)
* addToBasket() - добавляет товар в корзину
* removeFromBasket() - удаляет товар из корзины
* clearBasket() - очищает корзину
* clearOrder() - очищает данные текущего заказа
* inBasket() - проверяет наличие товара в корзине
* getTotal() - отдаёт сумму товаров из корзины
* setOrderField() - заполняет данные формы в заказ (тип оплаты, адрес)
* validateOrder() - проверяет валидацию типа оплаты и адреса
* setContactField() - заполняет данные формы в заказ (почта, телефон)
* validateContact() - проверяет данные почты и телефона

### Класс CardItem
Класс данных отдельной карточки. Хранит в себе информацию по товару. Наследуется от базового класса Model. <br>
Содердит следующие свойства:
```
id: string; // идентификатор товара
description: string; // описание товара
image: string; // ссылка на картинку товара
title: string; // название товара
category: string; // категория товара
price: number | null; // цена товара
inBasket: boolean = false; // признак наличия товара в корзине
```

## Компоненты представления
### Класс Basket
Класс отображения корзины. Наследуется от класса Component<IBasketView>.
```
interface IBasketView {
	items: HTMLElement[];
	total: number;
}
```
* Сеттер items - отрисовывает список элементов корзины
* Сеттер total - отрисовывает сумму заказа

### Класс Form<T>
Класс отображения формы. Наследуется от класса Component<IFormState>.
```
interface IFormState {
	valid: boolean;
	errors: string[];
}
```
* Сеттер valid - устанавливает свойство валидации формы.
* Сеттер errors - отрисовывает ошибки валидации формы.

Имеет следующие методы:
* render() - возвращает элемент формы

### Класс Modal
Класс для отображения модального окна. Наследуется от класса Component<IModalData>.
```
interface IModalData {
	content: HTMLElement;
}
```
* Сеттер content - отрисовывает содержимое внутри модального окна
Имеет следующие методы:
* open - открыть модальное окно
* close - закрыть модальное окно
* render - возвращает элемент модального окна

### Класс Success
Класс для отображения элемента при успешной оплате заказа. Наследуется от класса Component<ISuccess>.
```
interface ISuccess {
	total: number;
}
```
* Сеттер total - отрисовывает общую сумму списания